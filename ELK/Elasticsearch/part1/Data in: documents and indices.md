# 数据：文档和索引

Elasticsearch是一个分布式文档存储。Elasticsearch不将信息存储为列数据行，而是存储已序列化为JSON文档的复杂数据结构。当群集中有多个Elasticsearch节点时，存储的文档会分布在整个群集中，并且可以从任何节点立即访问。



当一个文档被存储时，它会被编入索引，并且几乎可以在1秒内实时地进行完全搜索。Elasticsearch使用一种称为倒排索引的数据结构，支持非常快速的全文搜索。倒排索引列出任何文档中出现的每个唯一单词，并标识每个单词出现的所有文档。



索引可以看作是文档的优化集合，每个文档都是字段的集合，字段是包含数据的键值对。默认情况下，Elasticsearch索引每个字段中的所有数据，每个索引字段都有一个专用的优化数据结构。例如，文本字段存储在倒排索引中，数字和地理字段存储在BKD树中。使用每个字段的数据结构来组合和返回搜索结果的能力是Elasticsearch如此快速的原因。



Elasticsearch还具有无模式的能力，这意味着可以对文档进行索引，而无需明确指定如何处理文档中可能出现的每个不同字段。启用动态映射后，Elasticsearch会自动检测并向索引中添加新字段。此默认行为使索引和浏览数据变得容易—只需开始索引文档，Elasticsearch就会检测布尔值、浮点值和整数值、日期和字符串，并将其映射到适当的Elasticsearch数据类型。



不过，最终，您比Elasticsearch更了解您的数据以及如何使用这些数据。您可以定义控制动态映射的规则，并显式定义映射以完全控制字段的存储和索引方式。



定义自己的映射使您能够：



- 区分全文字符串字段和精确值字符串字段

- 执行特定语言的文本分析

- 为部分匹配优化字段

- 使用自定义日期格式

- 使用无法自动检测的数据类型，如geo_point和geo_shape

- 为不同的目的以不同的方式索引同一字段通常是有用的。例如，您可能希望将字符串字段索引为全文搜索的文本字段和排序或聚合数据的关键字字段。或者，您可以选择使用多个语言分析器来处理包含用户输入的字符串字段的内容。



索引期间应用于全文字段的分析链也在搜索时使用。当您查询全文字段时，在索引中查找术语之前，查询文本将经历相同的分析。
